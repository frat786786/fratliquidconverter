{
  "resourceType": "Encounter",
  "id": "{{msg.id}}",
  "text": {
    "status": "generated",
    "div": "{{msg.text.div | escape_special_chars}}"
  },
  "identifier": [
    {
      "use": "{{msg.identifier.use}}",
      "system": "{{msg.identifier.system}}",
      "value": "{{msg.identifier.value}}"
    
    }
  ],
 "status" :
  {% if msg.Status == 'planned' -%}
    "planned",
     {% elsif msg.Status == 'arrived' -%}
    "arrived",
     {% elsif msg.Status == 'triaged' -%}
    "triaged",
     {% elsif msg.Status == 'in-progress' -%}
    "in-progress",
     {% elsif msg.Status == 'onleave' -%}
    "onleave",
     {% elsif msg.Status == 'finished' -%}
    "finished",
     {% elsif msg.Status == 'cancelled' -%}
    "cancelled",
     {% elsif code -%}
     "other",
     {% else %}
         "",
     {% endif -%}

  "class": {
    "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
    "code": "{{}}",
    "display": "{{}}"
  },
  "type": [
    {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "",
          "display": "{{msg.EncounterType}}",
        }
      ]
    }
  ],
  "serviceType": 
    {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "",
          "display": "{{msg.EncounterType}}",
        }
      ]
    },


   "priority": {
    "coding": [
      {
        "system": "http://snomed.info/sct",
        "code": "310361003",
        "display": "Non-urgent cardiological admission"
      }
    ]
  },
 
  "subject": {
    "reference": "Patient/{{msg.PatientId}}",
    "display": "{{msg.subject.display}}"
  },
  "episodeOfCare": {
    "reference": "EpisodeOfCare/{{msg.EpisodeOfCareId}}",
    "display": "{{msg.episodeOfCare.display}}"
  },
  "basedOn": {
    "reference": "ServiceRequest/{{msg.basedOn}}",
    "display": "{{msg.basedOn.display}}"
  },
  
  "participant": [

    {
    "type": 
    {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "",
          "display": "{{msg.type}}",
        }
      ]
    },

      "individual": {
        "reference": "Practitioner/f002",
        "display": "{{p.individual.display}}"
      },
     "period": {
    "start" : "{{msg.start}}",
},

    }

  ],
"appointment": {
    "reference": "Appointment/{{msg.appt}}",
    "display": "{{msg.appointment.date}}"
  },
 "period": {
  "start" : "{{msg.AdmissionDate}}",
},

  "length": {
    "value": "",
    "unit": "min",
    "system": "http://unitsofmeasure.org",
    "code": "min"
  },
   "reasonCode": [
   
    {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "",
          "display": "{{msg.ReasonCode}}"
        }
      ]
    }
 
  ],
  "reasonReference": {
    "reference": "Condition/{{msg.reasonref}}",
    "display": "{{msg.reasonRefernece}}"
  },
"diagnosis":[
    {
      "condition": {
        "display": "Complications from Roel's TPF chemotherapy on January 28th, 2013"
      },
      "use": {
        "coding": [
          {
            "system": "http://terminology.hl7.org/CodeSystem/diagnosis-role",
            "code": "AD",
            "display": "{{msg.Diagnosis}}"
          }
        ]
      },
      "rank": 1
    },
],
 
  "hospitalization": {
    "preAdmissionIdentifier": {
      "use": "official",
      "system": "http://www.amc.nl/zorgportal/identifiers/pre-admissions",
      "value": ""
    },
"origin": {
    "reference": "Location/{{msg.location}}",
    "display": "{{msg.location}}"
  },
    "admitSource": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.admitSource.coding.code}}",
          "display": "{{msg.AdmitSource}}"
        }
      ]
    },
"reAdmission": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.admitSource.coding.code}}",
          "display": "{{msg.readmission}}"
        }
      ]
    },
"dietPreference": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.admitSource.coding.code}}",
          "display": "{{msg.readmission}}"
        }
      ]
    },
  "specialCourtesy": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.admitSource.coding.code}}",
          "display": "{{msg.readmission}}"
        }
      ]
    },
    "specialArrangement": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.admitSource.coding.code}}",
          "display": "{{msg.readmission}}"
        }
      ]
    },
  
  "destination": {
    "reference": "Location/{{msg.location}}",
    "display": "{{msg.location}}"
  },

  
    "dischargeDisposition": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.dischargeDisposition.coding.code}}",
          "display": "{{msg.dischargeDisposition.coding.display}}",
        }
      ]
    }
  },
  
 "location": {
  "location": {
    "reference": "Location/{{msg.location}}",
    "display": "{{msg.location}}"
  },
  "status":"planned",
   
  "physicalType": {
      "coding": [
        {
          "system": "http://snomed.info/sct",
          "code": "{{msg.dischargeDisposition.coding.code}}",
          "display": "{{msg.dischargeDisposition.coding.display}}",
        }
      ]
    },
     "period": {
    "start" : "{{msg.start}}",
},

    },

 "serviceProvider": {
    "reference": "Organization/{{msg.orgId}}",
    "display": "{{msg.orgId}}"
  },
  "partOf": {
    "reference": "Encounter/{{msg.encId}}",
    "display": "{{msg.encId}}"
  },

 }